<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The Odds of Participation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-b15df86742554840d07b04d0f56a07e9.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">


<meta name="citation_title" content="The Odds of Participation">
<meta name="citation_author" content="Tatum Good">
<meta name="citation_author" content="Ruby Thompson">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=A guide to backward paper writing for the data sciences;,citation_abstract=Summary In this perspective, we outline a set of best practices for the planning, writing, and revision of scientific papers and other forms of professional communication in the data sciences. We propose a backward approach that begins with clearly identifying the scientific and professional goals motivating the work, followed by a purposeful mapping from those goals to each section of a paper. This approach is motivated by the conviction that manuscript writing can be more effective, efficient, creative, and even enjoyable—particularly for early-career researchers—when the overarching goals of the paper and its individual components are clearly mapped out.;,citation_author=Jon Zelner;,citation_author=Kelly Broen;,citation_author=Ella August;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://www.sciencedirect.com/science/article/pii/S2666389921003068;,citation_issue=3;,citation_doi=10.1016/j.patter.2021.100423;,citation_issn=2666-3899;,citation_volume=3;,citation_journal_title=Patterns;">
<meta name="citation_reference" content="citation_title=Risk factors for pathological gambling;,citation_abstract=Summary Through a comprehensive survey of over 2,600 adults, this study identifies major risk factors for pathological gambling, including younger age, male gender, and substance abuse. The authors stress the importance of early intervention strategies targeting vulnerable populations.;,citation_author=John W. Welte;,citation_author=Grace M. Barnes;,citation_author=William F. Wieczorek;,citation_author=Marie-Cecile Tidwell;,citation_author=Joseph C. Parker;,citation_publication_date=2004;,citation_cover_date=2004;,citation_year=2004;,citation_fulltext_html_url=https://doi.org/10.1016/j.addbeh.2003.08.007;,citation_issue=2;,citation_doi=10.1016/j.addbeh.2003.08.007;,citation_volume=29;,citation_journal_title=Addictive Behaviors;">
<meta name="citation_reference" content="citation_title=The population prevalence of problem gambling: Methodological influences, standardized rates, jurisdictional differences, and worldwide trends;,citation_abstract=Summary This technical report synthesizes problem gambling prevalence rates across jurisdictions, analyzing how methodology influences results. It introduces standardized measures for cross-national comparisons and identifies key demographic and policy-based risk factors globally.;,citation_author=Robert J. Williams;,citation_author=Rachel A. Volberg;,citation_author=Robert M. G. Stevens;,citation_publication_date=2011;,citation_cover_date=2011;,citation_year=2011;,citation_fulltext_html_url=https://prism.ucalgary.ca/handle/1880/48495;,citation_publisher=Ontario Problem Gambling Research Centre;">
<meta name="citation_reference" content="citation_title=2006 california problem gambling prevalence survey;,citation_abstract=Summary This critical review examines global prevalence data on problem gambling, highlighting methodological inconsistencies and cultural variation. The authors call for standardized diagnostic frameworks to improve international comparability and policy response.;,citation_author=Rachel A. Volberg;,citation_author=Kari L. Nysse-Carris;,citation_author=Dean R. Gerstein;,citation_publication_date=2010;,citation_cover_date=2010;,citation_year=2010;,citation_fulltext_html_url=https://www.problemgambling.ca/EN/Documents/CaliforniaProblemGamblingPrevalenceSurvey.pdf;,citation_publisher=California Department of Alcohol; Drug Programs;">
</head>

<body class="quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">The Odds of Participation</h1>
            <p class="subtitle lead">Socioeconomic Predictors of Sports-Gambling Activity and Its Implications</p>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                <div>
            <div class="quarto-title-meta-heading">Authors</div>
            <div class="quarto-title-meta-contents">
                        <p>Tatum Good </p>
                        <p>Ruby Thompson </p>
                      </div>
          </div>
                
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#statistical-thinking" id="toc-statistical-thinking" class="nav-link" data-scroll-target="#statistical-thinking">Statistical Thinking</a></li>
  <li><a href="#machine-learning" id="toc-machine-learning" class="nav-link" data-scroll-target="#machine-learning">Machine Learning</a></li>
  <li><a href="#data-visualization" id="toc-data-visualization" class="nav-link" data-scroll-target="#data-visualization">Data Visualization</a></li>
  <li><a href="#data-ethics" id="toc-data-ethics" class="nav-link" data-scroll-target="#data-ethics">Data Ethics</a></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a>
  <ul class="collapse">
  <li><a href="#data-dictionary" id="toc-data-dictionary" class="nav-link" data-scroll-target="#data-dictionary">Data Dictionaries</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




  


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Rapid legalization of gambling across the United States and the rise of app-based and online betting platforms, has propelled sports betting into a multi-billion-dollar industry. This transformation has introduced new forms of entertainment, economic opportunity, and athlete benefits, but it has also sparked critical questions about who participates in this growing industry and why. Specifically, are patterns of sports betting participation evenly distributed across demographic groups? And if not, which characteristics, such as education or income level, are most closely associated with higher betting activity?</p>
<p>Our hypothesis is that groups of lower socioeconomic status, with particular regards to income and education, would see higher rates of sports betting participation. Historically, gambling in general has been associated with lower-income and less-educated households. However, with sports betting being such a new venture in the gambling world, it is not widely associated with these socioeconomic trends yet. However, if these groups are in fact participating at a higher rate than others of higher socioeconomic standing, it raises concerns. For many individuals, gambling may reflect not recreational entertainment, but economic desperation, misinformed optimism, or a perceived path to financial mobility. In such contexts, the consequences of betting can deepen cycles of financial instability. At the same time, education levels may influence individuals’ understanding of risk, probability, and long-term outcomes, potentially creating an equity gap in financial decision-making and loss aversion.</p>
</section>
<section id="background" class="level1">
<h1>Background</h1>
<p>Existing research on gambling behavior has long highlighted disparities in participation and harm across socioeconomic lines. Numerous studies have shown that individuals with lower income and education levels are more likely to engage in gambling activities and to experience gambling-related harm. These patterns suggest that gambling is often more than a recreational activity among vulnerable populations, but rather means for financial gain; driven by economic hardship or limited financial literacy. <span class="citation" data-cites="Williams2011">(<a href="#ref-Williams2011" role="doc-biblioref">Williams, Volberg, and Stevens 2011</a>)</span>, <span class="citation" data-cites="Welte2004">(<a href="#ref-Welte2004" role="doc-biblioref">Welte et al. 2004</a>)</span> However, it is important to note that when these articles reference higher rates of gambling among lower incomes populations, it is often in reference to percentage of income; people with less income spend a higher percentage of their earnings on gambling compared to those with higher income.</p>
<p>Much of the existing literature focuses on traditional forms of gambling, such as casinos, lotteries, or scratch tickets, rather than sports betting, which has recently evolved due to mobile technologies and policy shifts. The legalization of sports betting across more than 30 U.S. states, coupled with app-based betting platforms, has introduced a new gambling ecosystem. Initial studies suggest that online sports bettors tend to skew younger and more male, and may differ in behavior and motivations from traditional gamblers. <span class="citation" data-cites="Volberg2010">(<a href="#ref-Volberg2010" role="doc-biblioref">Volberg, Nysse-Carris, and Gerstein 2010</a>)</span></p>
<p>Because of the developing nature of this sector, studies have not examined how socioeconomic factors such as income or education level correlate to participation in sports betting to the same degree as studies on traditional gambling. This gap in the literature is significant given the rapid expansion of the sports betting industry and its integration into everyday digital life.</p>
<p>Our study seeks to address this gap by examining correlations between fiscal sports betting data and state-level demographics, particularly educational attainment and income. By focusing on macro-level data across legalized states, we aim to identify whether historical socioeconomic disparities in gambling participation are mirrored in the newer domain of sports betting. If lower socioeconomic status is indeed linked to higher sports betting participation, this would suggest a need for proactive public health messaging and regulatory safeguards tailored to the unique risks of app-based platforms.</p>
<p>Therefore, this study aims to reveal the correlation between sports gambling and socioeconomic factors with the hope to understand the predictors and if warnings or precautionary steps should be taken to prevent adverse effects to certain participants. While we hypothesize a positive correlation between these factors, our real hope is to deepen the understanding of this growing field to protect against misuse of the activity. While the language in this study is mostly general and common knowledge, there are a few vocabulary terms we would like to highlight here:</p>
<p><strong>Gambling:</strong> Gambling is the act of wagering something of value (usually money) on an event with an uncertain outcome, primarily for the purpose of winning additional money or material goods. It includes a wide range of activities such as lotteries, casino games, poker, and sports betting.</p>
<p><strong>Sports Betting:</strong> Sports betting is a specific form of gambling in which individuals place wagers on the outcomes of sporting events. While sports betting can be done in person, the recent popularity of sports betting mobile apps, it has become one of the fastest-growing sectors of the gambling industry.</p>
<p><strong>Handle:</strong> In the context of gambling, handle refers to the total amount of money wagered by bettors, regardless of whether the bets are won or lost. For example, a state’s monthly sports betting handle reflects the gross volume of bets placed, not the revenue retained by operators or the winnings paid out.</p>
</section>
<section id="data" class="level1">
<h1>Data</h1>
<p>With the goal of this project being to investigate the correlation between sports betting rates and education/income trends across U.S. states, we collected and compiled data from multiple sources. The first dataset, titled Online Sports Betting Dataset, was the most straightforward. This data included information about the 31 legalized states in sports betting and was retrieved from &lt;rg.org/statistics/us&gt;. Since the data was not contained in an easily scraped format, we downloaded it manually by switching between the year toggle button to get access to all the publicly available data. In doing this, we were able to gain sports betting data from 26 states as multiple states have sports bettting activity through tribal casinos or have only been legalized in the year 2025 so there is not data available yet. Since the process of getting this data was straightforward, it did require any additional cleaning.</p>
<p>In contrast, collecting income and education data from the U.S. Census (covering the years 2018–2023) proved more complex. The range from 2018-2023 was selected because it represents the overlap of available years across our datasets. However, due to the structure of the Census API, each year and state combination was available at a different API endpoint. Additionally, the topic parameter (either income or education) had to be specified separately. This meant that retrieving data for the 31 included states across six years, for two topics, would have required 384 manual downloads and subsequent joins.</p>
<p>To avoid this, we built a web scraper using Docker, Supabase, PostgreSQL, and Beekeeper Studio. From Census, we were able to grab a variable identifier called <code>GeoID</code> which are numeric codes that uniquely identify all geographical areas for which the Census Bureau. In our case, this contains all the ids that identify the states we want to scrape for.</p>
<p>The scraper looped through the <code>year</code> and <code>GeoID</code> values in the API URL to pull each required combination in one run. However, we opted to run the scraper twice, once for income and once for education, manually replacing the topic ID in the <code>scraper.py</code> file between runs, rather than building the scraper to run both topics. The logic behind this decision was that it was simpler to change one number in the <code>scraper.py</code> file and run it a second time, than create a scraper that switched which table it was dumping into halfway through, since storing education and income in two individual tables was better for the planned analysis.</p>
<p>To automate this process and manage dependencies across our local devices, we used Docker. Docker allowed us to contain our scraping environment so that all required libraries, API keys, and files could be packaged into a single reproducible environment. This ensured that the scraper would run identically regardless of the local setup and all us to deploy the scraper in a controlled environment,</p>
<p>For data storage, we used Supabase which is an open-source backend service platform that provides a hosted PostgreSQL database along with API keys and file storage features. This acted as a cloud layer that hosted our PostgreSQL instance, making it accessible to both members of our team without having to manage database infrastructure ourselves. Supabase connects directly from our local tools for easy querying and inspection. We then stored all the scraped data in Beekeeper to clean and work with.</p>
<p>Once scraped, we employed SQL to clean and normalize the raw JSON responses into a table format. Rather than storing all columns from the original census datasets, we selected only the variables relevant to our analysis. This process resulted in three final tables: the sports betting dataset, the cleaned income dataset, and the cleaned education dataset, all of which were stored on local systems for the remainder of the project. For each dataset, we performed several operations to ensure consistency across columns and formats. We first conducted basic data cleaning and wrangling where the column values and names were altered to be consistent among all the data. The next step was finding a common variable among our three datasets. <code>Geoid</code> and <code>year</code> became our primary identifiers across our sports betting, cleaned income, and cleaned education datasets. This also allowed for simple screening for duplicates among the tables that may have the same geoid and year, and we were able to filter those out quickly. We created a <code>location</code> table that showed the corresponding state name to each <code>geoID</code>, which worked as a connection between all tables. After that we normalized the data structure in a way we believed was efficient for our planned analysis.</p>
<p>As seen Figure 1, to support analysis of the relationship between sports betting activity and socioeconomic trends across U.S. states, the data was structured into a schema that separates income, education, and betting metrics into connected tables to facilitate flexible joins. <code>Geoid</code> and <code>year</code> serve as foreign keys linking all domain-specific tables (income, education, and sports betting) to the central location table that maps each geoid to a state-level <code>place_name</code>. Income data is organized into two fact tables. The <code>income_distribution</code> table captures the percentage of households within each income bracket and household type, while the <code>income_summary</code> table provides metrics such as total households, median income, and mean income by household type. These reference the <code>income_brackets</code> and <code>household_type</code> dimension tables for consistency. Education data is stored in the <code>edu_long</code> table, which reports the number of individuals by education level and age group. It joins the <code>age_group_map</code> table to normalize age categories. Sports betting data is stored in <code>clean_sports</code>, which contains metrics such as handle, revenue, hold, and taxes. This table integrates with the rest of the schema via shared identifiers. This structure allows for efficient querying as we explore the research question.</p>
<figure id="fig-erd" class="figure">
<img src="figures/figure1a.png" alt="ERD diagram" width="800" class="figure-img">
<figcaption style="font-size: 8px; color: #555;">
Figure 1: This figure displays an ERD normalized to third normal form (3NF), highlighting primary keys and table relationships. All our tables are in some way connected to the location table.
</figcaption>
</figure>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<p>Due to the presence of two socioeconomic predictors in this analysis, a two pronged approach was used to evaluate each predictors impact on sports betting individually. Because of the limited knowledge of known sports-betting motivators, we felt this was the best approach considering no direct correlation between the combination of these variables and sports betting has been made to our knowledge. We evaluated the connections between education and income’s individual relationships with sports betting indicators to see the true results.</p>
<section id="statistical-thinking" class="level2">
<h2 class="anchored" data-anchor-id="statistical-thinking">Statistical Thinking</h2>
<p>To explore the potential correlation between sports betting activity and educational attainment, we used a multiple linear regression model. Statistical thinking in this context allowed us to distill sports betting into a model that quantifies relationships between education level and betting activity, while also accounting for uncertainty. Naturally, this was the first step of our analysis and was primarily conducted as a validation to move forward with the planned direction of analysis.</p>
<p>Our education model examined the relationship between the percentage of a state’s population at various education levels and the per resident sports betting handle (<code>“hand_per_capita”</code>) using state-level data. The model included five predictor variables: percent of adults without a high school degree <code>hs_no_grad_pct</code>, high school graduates <code>hs_grad_pct</code>, associate degree holders <code>ass_pct</code>, bachelor’s degree holders <code>bach_pct</code>, and graduate or professional degree holders <code>grad_or_prof_pct</code>. Because we were working with fiscal data and population counts, if we did not scale it using percentages the model would have simply correlated higher populations with higher total handle.</p>
<p>Our linear model achieved a p-value of <strong>6.642e-06</strong> when considering all five levels of degree attainment. This shows a statistically significant correlation between different levels of degree attainment and handle per resident. Notably, the most influential variable was the bachelor’s degree percentage, indicating that advanced secondary education could affect state level sports betting activity. This modeling approach was appropriate for our research question because we sought to understand not just the presence of a relationship, but the strength and direction of influence that each educational level may exert on sports betting participation, which directed later stages of our research as it revealed what areas in which we should focus.</p>
<p>Linear regression allowed us to estimate how each education category contributes to variations in betting revenue. The results suggest that among all educational categories, the proportion of bachelor’s degree holders (<code>bach_pct</code>) had a statistically significant relationship with sports betting revenue. We will discuss that this means in terms of handling per person in the next section. (Machine Learning) Other education categories, including high school dropouts and associate degree holders, showed no statistically significant effects on their own, this is what inspired the focus on bachelor’s degree attainment you will see though the rest of this report.</p>
<p>This finding runs contrary to our initial hypothesis that lower educational attainment would be more strongly associated with increased betting activity. However, the model yielded a modest R-squared value of <strong>0.2907</strong>, indicating that approximately <strong>29.07%</strong> of the variance in sports betting revenue per capita can be explained by educational attainment variables. This suggests other factors (such as income) are also influencing participation.</p>
<p>To explore the potential correlation between income levels and sports betting activity, we applied statistical thinking by using multiple linear regression models. This approach allowed us to structure our data into a formal framework, quantify relationships between income metrics and sports betting participation, and assess the significance of each variable while controlling for others.</p>
<p>Given the complexity of socioeconomic factors and their possible overlap with population size, our income model incorporated both household count and income variables, using per-household normalization to avoid misleading conclusions driven by raw scale. Before modeling, we conducted a correlation analysis to evaluate the strength of linear relationships between income metrics and sports betting variables (see Figure 3). This preliminary step confirmed strong correlations between total households and both handle and revenue, as well as moderate correlations with income metrics.</p>
<figure id="fig-corr_income" class="figure">
<img src="figures/figure2b.png" alt="corr_income" width="800" class="figure-img">
<figcaption style="font-size: 8px; color: #555;">
Figure 3: Correlation analysis exploring linear relationships between income and sportsbetting metrics where the biggest correlations across our data are between mean_income_dollars with handle or revenue.
</figcaption>
</figure>
<p>Our analysis utilized state-level data and focused on three key predictors: mean income <code>mean_income_dollars</code>, median income <code>med_income_dollars</code>, and the total number of households <code>total_households</code>. We first modeled total sports betting handle as a function of these variables. As shown in Figure 3, the results indicated that all three predictors were relatively correlated. In particular, total households had the strongest relationship, with both revenue and handle suggesting a scaling effect. Mean income and median income had moderate correlation with both handle and revenue as well.</p>
<p>A high mean income coupled with a relatively lower median suggests a skewed distribution with a concentration of wealth among high earners. These individuals may be driving higher per-household betting revenue, either through discretionary spending or engagement with high-stakes platforms, skewing the overall picture. Based on</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Variable</th>
<th>Pre-Normalization</th>
<th>Post-Normalization</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>R²</td>
<td>0.7224 (72.24%)</td>
<td>0.4027 (40.27%)</td>
</tr>
<tr class="even">
<td>P-value</td>
<td>0.00366</td>
<td>0.000192</td>
</tr>
</tbody>
</table>
<p>To refine this analysis, we created a normalized model using sports betting revenue per household <code>revenue_per_household</code> as the response variable. This adjustment removed the confounding influence of state population size and allowed us to better isolate the impact of income itself.</p>
<p>In this model (see Figure 4), mean income remained a significant positive predictor, with each additional dollar of mean income associated with a <strong>$0.0049</strong> increase in per-household betting revenue. Median income had a marginally significant negative association, potentially reflecting a skew in how wealth is distributed within states.</p>
<figure id="fig-norm_lm_income" class="figure">
<img src="figures/figure2c.png" alt="norm_lm_income" width="800" class="figure-img">
<figcaption style="font-size: 8px; color: #555;">
Figure 4: Normalized linear models analyzing our key predictors relationship with handle and revenue.
</figcaption>
</figure>
<p>The normalized model yielded an adjusted R-squared value of <strong>0.335</strong>, indicating that approximately <strong>33.5%</strong> of the variation in <code>revenue_per_household</code> can be explained by the two income variables. This represents a substantial improvement in explanatory power compared to models based solely on raw totals.</p>
<p>Compared to the unnormalized model predicting total handle, which explained only <strong>12.4%</strong> of the variance (adjusted R² = <strong>0.124</strong>), the normalized model’s adjusted R² of <strong>0.335</strong> indicates a substantial improvement. This suggests that per-household betting behavior is more systematically associated with income metrics than raw betting totals are.</p>
<p>Taken together, the findings suggest that states with higher mean income levels tend to see greater per-household betting participation, possibly due to increased disposable income or different spending behaviors among higher-income populations.</p>
<p>Conversely, the negative effect of median income may imply that income inequality, or the presence of high earners pulling up the mean, plays a more subtle role in shaping betting habits. This normalization is crucial because raw totals such as total handle or revenue are highly sensitive to population differences across states. Without adjustment, larger states would appear to have higher betting activity simply due to scale. By expressing revenue on a per-household basis, we focus the analysis on behavioral intensity rather than raw volume, making comparisons across states more meaningful.</p>
<p>These results complement our education analysis by highlighting that not only do demographic factors such as education level relate to sports betting behavior, but so do financial factors. Importantly, both analyses underscore the need to control for population size and distributional effects when modeling large-scale behavioral data such as gambling activity.</p>
</section>
<section id="machine-learning" class="level2">
<h2 class="anchored" data-anchor-id="machine-learning">Machine Learning</h2>
<p>To complement our traditional statistical modeling and visualizations, we employed a Random Forest regression model to understand the relative importance of different education levels in predicting per capita sports betting activity. Machine learning models, particularly ensemble methods like Random Forests, are used for uncovering nonlinear relationships and interactions between variables that standard linear regression might miss. Linear models assume additive, independent relationships and normally distributed residuals; Random Forests handles nonlinear relationships and potential multicollinearity between education categories, which are likely correlated in real-world populations.</p>
<p>Our Random Forest model was built using the <code>randomForest</code> package in R. The outcome variable was <code>hand_percap</code> (sports betting handle per person in each state) and the predictors were the percentage of adults with each level of educational attainment: No high school diploma, High school diploma, Associate degree, Bachelor’s degree, and Graduate or professional degree. We trained the model with <code>importance = TRUE</code> to allow for feature importance analysis, helping us identify which variables contributed most to the prediction of sports betting handle.</p>
<p>From the linear model output, we observe that the coefficients suggest a strong positive relationship between bachelor’s degree attainment and betting per capita (<strong>+31.24</strong>), and a negative relationship with associate degree attainment (<strong>–27.86</strong>). These results somewhat mirror those found in our earlier multivariable regression, with new findings related to that of an associates degree. However, the true advantage of the Random Forest model lies in its ability to estimate variable importance without assuming linearity. Feature importance metrics reinforced that bachelor’s degree attainment was the most influential predictor of handle per capita. Other education levels such as high school diploma or graduate degrees showed lower importance scores, and associate degrees had an inverse relationship.</p>
<p>This convergence across one parametric model and one non-parametric model makes us confident that our findings are not artifacts of model structure or assumptions. In fact, Random Forest’s support for the same insight (the importance of bachelor’s degree prevalence) boosts our confidence that the relationship is meaningful and not merely coincidental or driven by outliers. Together with our regression model and visualization work, this machine learning analysis allows us to conclude that states with higher proportions of residents holding bachelor’s degrees tend to have higher sports betting participation per capita.</p>
<p>To complement our statistical regression analysis and further examine the relationship between income and sports betting activity, we applied both linear and logistic machine learning models using the <code>caret</code> package in R. These models provided different analytical lenses: regression for predicting a continuous outcome (<code>revenue_per_household</code> from sports betting), and classification for distinguishing between “high” and “low” sports betting states based on income variables. These approaches helped us assess whether income-related factors meaningfully predict betting participation, and whether such effects persist across model types.</p>
<p>We began by training a multiple linear regression model, using <code>revenue_per_household</code> as the continuous outcome. Predictor variables included <code>mean_income_dollars</code>, <code>med_income_dollars</code>, and <code>total_households</code>. This model allowed us to assess both the direction and strength of associations between income metrics and per-household betting activity. While total_households emerged as a statistically significant positive predictor (<strong>p = 0.018</strong>), the coefficients for both mean and median income were small and not significant, suggesting only a weak linear relationship between income levels and sports betting revenue at the state level. To evaluate predictive performance, we plotted actual versus predicted values for the linear model. Although the dashed 1:1 reference line provides a visual benchmark, the spread of points indicated moderate prediction accuracy. The model’s R² of <strong>0.39</strong> suggests that less than half of the variation in betting <code>revenue_per_household</code> can be explained by these three income-based predictors.</p>
<p>To explore the data from a different angle, we transformed the continuous outcome into a binary classification target. States were labeled “High” if their <code>revenue_per_household</code> exceeded the national median, and “Low” otherwise. We then trained a logistic regression model using the same three predictors. The goal was to assess how well income-related variables could distinguish between states with relatively high versus low sports betting intensity. The classification model achieved an overall accuracy of <strong>67.4%</strong>, significantly better than the no-information rate of <strong>50.6%</strong> (<strong>p = 0.001</strong>). Sensitivity and specificity were balanced at approximately <strong>66–69%</strong>, suggesting the model performed similarly well at identifying both high and low revenue states. Among the predictors, the number of households again stood out as significant (<strong>p = 0.0048</strong>), but median income also approached significance (<strong>p = 0.073</strong>), indicating a potential negative relationship with high betting participation.</p>
<p>The combination of these models reveals a consistent signal: income is not a particularly strong standalone predictor of sports betting participation, but total household count does show a consistent association. This could be reflecting structural factors like urbanization, market size, or marketing reach rather than income. Importantly, these results contrast with our findings on education, where the relationship with betting was both stronger and more interpretable. These machine learning models together help clarify that while income may play a role, it is not the dominant socioeconomic factor in predicting sports betting activity.</p>
<p>While our statistical thinking and machine learning revealed some potential trends, we wanted to use visual analysis to see where the suspected correlation and negations were, and if we could further prove or disprove our hypothesis.</p>
</section>
<section id="data-visualization" class="level2">
<h2 class="anchored" data-anchor-id="data-visualization">Data Visualization</h2>
<p>Because our study investigates structural socioeconomic predictors of sports betting participation across U.S. states, visualization allowed us to explore spatial and demographic variation that would be obscured in a purely tabular or statistical summary. Each graphic was chosen and designed to make abstract trends in the data tangible. This was specifically helpful for our research question because of the twenty-six states that were relevant to our analysis. To evaluate education, we employed three types of visual techniques: grouped bar charts, choropleth maps, and bivariate scatterplots with linear models.</p>
<figure id="fig-mean_hand" class="figure">
<img src="figures/figure3a.png" alt="mean_hand" width="800" class="figure-img">
<figcaption style="font-size: 8px; color: #555;">
Figure 5: Mean percentage of sports betting handle contributed by each region compared to their educational attainment rates.
</figcaption>
</figure>
<p>This grouped bar chart was created to compare regional averages of sports betting contribution and educational attainment. Using regional grouping (Midwest, Northeast, South, and West) helped reduce state-level noise and highlight macro trends across large geographies. The decision to normalize state betting volume by national handle (rather than just raw values) allows for meaningful cross-region comparison despite population differences, as mentioned earlier.</p>
<p>Including education categories side-by-side reveals internal contrasts: for example, the South has the highest proportion of residents with only a high school diploma (<strong>16.4%</strong>) but a lower mean contribution to national sports betting handle (<strong>3.3%</strong>). Conversely, the West and Northeast show higher bachelor’s and graduate degree rates, and they also contribute disproportionately more to national handle. These visuals suggest that higher educational attainment may correlate with greater sports betting participation, a surprising and strong reversal of our original hypothesis.</p>
<figure id="fig-combo1" class="figure">
<img src="figures/figure3b.png" alt="combo1" width="800" class="figure-img">
<figcaption style="font-size: 8px; color: #555;">
Figure 6: Left: State-level sports betting handle per person. Right: Percent of population with at least a bachelor’s degree.
</figcaption>
</figure>
<p>To better understand geographic variance, we used choropleth maps to visualize state-level differences in both betting behavior and education attainment. Mapping handle per capita better reflects how intensely betting is occurring per resident rather than simply the sheer total. Pairing this map with a visualization of bachelor’s degree prevalence allowed us to visually test whether educational attainment is geographically co-located with higher levels of betting activity. We particularly chose to visualize bachelor’s degrees based on the results from the linear model, which weight bachelor’s degrees as having the highest impact on sports betting handle.</p>
<p>A noticeable feature of this graphic is that Northeastern states like New Jersey and New York stand out on both maps, high in handle per person and in bachelor’s degree rates, further supporting the idea that betting volume is not purely driven by economic desperation or low education levels. This falls in line with previous analysis from our region visualization showing higher betting contributions and education in the northeast.</p>
<figure id="fig-combo2" class="figure">
<img src="figures/figure3c.png" alt="combo2" width="800" class="figure-img">
<figcaption style="font-size: 8px; color: #555;">
Figure 7: Left: Betting handle vs.&nbsp;high school diploma rates. Right: Betting handle vs.&nbsp;bachelor’s degree rates.
</figcaption>
</figure>
<p>To quantify the relationships suggested by our bar chart and map visualizations, we used scatterplots with fitted linear regression lines. This approach is effective for testing the direction and form of a relationship between two continuous variables; here, educational attainment percentage and percentage of national handle per state.</p>
<p>On the left, we see a negative correlation between the percentage of adults with only a high school diploma and their state’s betting contribution by residents. This challenges typical gambling trends that lower educational attainment drives betting behavior.</p>
<p>On the right, we observe a positive relationship between bachelor’s degree attainment and national handle share.</p>
<p>Ultimately, these visualizations further helped to debunk our hypothesis, instead, states with higher proportions of college-educated adults appear to participate more in sports betting, not less– a finding that would be difficult to identify through tables or regression coefficients alone.</p>
<p>–Tatum Section To explore the relationship between income and sports betting participation across U.S. states, we used data visualizations to uncover patterns not immediately visible through numeric summaries or regression output. These visual tools helped us examine how both average and low-income populations relate to betting behavior, using a combination of scatterplots and choropleth maps.</p>
<p>By incorporating both normalized and disaggregated income measures, we were able to contextualize betting activity within broader socioeconomic landscapes and challenge simplistic assumptions about gambling participation.</p>
<p>To visualize geographic variation in income and betting simultaneously, we employed the use of choropleth maps. The map in Figure 9 displays normalized betting <code>handle_per_household</code>, in relation to percentage of low-income household within each state.</p>
<p>This choropleth map reveals distinct geographical patterns in the relationship between income and betting behavior that are not evident from scatterplots alone. The map highlights two primary regions with a high sports betting handle per household. First, a cluster in the Northeast is characterized by higher-income households and a high handle. Second, a corridor from the West through the Central U.S. shows similar high-volume betting markets, suggesting that this behavior is not confined to a single demographic profile. A particularly notable finding is the cluster of states in the South where a higher percentage of low-income households corresponds with a high handle per household.</p>
<p>This contrasts sharply with the Northeast and suggests that in these specific states, sports betting may represent a significant expenditure for lower-income households. Finally, the map shows that states with a low handle per household are distributed across the country and the income spectrum, with states like Washington categorized as higher-income, low-handle and others like West Virginia as lower-income, low-handle. This demonstrates that a low betting handle is not solely determined by income but is likely influenced by other variables such as state-specific regulations or market maturity.</p>
<figure id="fig-combo_maps" class="figure">
<img src="figures/map2.png" alt="combo_maps" width="800" class="figure-img">
<figcaption style="font-size: 8px; color: #555;">
Figure 9: Choropleth map illustrating the relationship between the percentage of low-income households and sports betting handle per household across states. The color of each state represents a combination of its income profile (on the x-axis) and its handle per household (on the y-axis). States reveal a higher frequency of having a higher income relationship with handle contribution.
</figcaption>
</figure>
<p>This map shows how income levels and sports betting activity intersect across states. Higher-income states with high betting activity appear in the Northeast, Midwest, and Southwest, while medium-income states generally show lower to moderate betting levels. Lower-income, high-betting states are rare, but the presence of some lower-income states with moderate betting could signal potential vulnerability to gambling-related harm. This map shows that the states with the highest betting activity per household are often not the ones with the highest percentage of low-income households — in fact, many of them fall in higher-income categories. Lower-income, high-betting states are rare, which challenges the traditional belief that gambling is primarily driven by poverty. Instead, the pattern we see here supports our finding that sports betting is more common among affluent, educated, and digitally connected populations — likely driven by greater internet access, cultural normalization, and disposable income.</p>
<p>This finding went against our initial hypothesis that sports betting activity would be most concentrated in states with a higher percentage of low-income households, driven by the theory that gambling serves as a means of seeking economic relief. The distinct visualization of high betting activity in high-income states and the rarity of the opposite challenged this assumption. This observation was a crucial turning point, inspiring us to create a scatterplot to further explore this relationship. By plotting the percentage of low-income households against the handle per household, we could more precisely verify whether this inverse relationship held true across all states or if the regional patterns observed on the map were the result of other confounding variables.</p>
<p>As shown in Figure 10, this scatterplot provided the final confirmation, revealing a clear negative relationship that ultimately negated our initial hypothesis on the income side as well. As the distribution of low-income households increases, betting activity per household tends to decrease. This pattern directly contradicts the traditional view that gambling is driven by poverty. Instead, it aligns with our finding that sports betting participation is higher among more affluent, educated, and digitally connected populations—likely fueled by greater internet access, cultural acceptance, and disposable income. While the overall trend is undeniable, it is worth noting the outliers of Louisiana and Mississippi, which were among the few lower-income states with higher-than-average handle contributions.</p>
<figure id="fig-low_income" class="figure">
<img src="figures/scatter_in.png" alt="low_income" width="800" class="figure-img">
<figcaption style="font-size: 8px; color: #555;">
Figure 10: Scatterplot showing the relationship between a state’s average sports betting handle per household and its percentage of low-income households. The downward-sloping red line represents the linear trend, indicating a negative correlation between the two variables.
</figcaption>
</figure>
<p>While this may seem counterintuitive to some policy narratives, it aligns with economic theory suggesting that disposable income is a prerequisite for discretionary spending, including gambling. This result challenges the common narrative that sports betting is driven primarily by economic desperation. This indicates instead that participation may be more prominent in higher-income populations with greater discretionary spending capacity.</p>
<p>States with greater proportions of middle- and upper-income brackets often also had higher per capita betting revenue, offering yet another lens into how income levels may facilitate or constrain sports betting activity. These visuals suggest that sports betting in the United States is not predominantly driven by poverty, but rather may be a behavior more concentrated among middle- and higher-income earners. This finding directly complicates common assumptions and reveals the value of visualizing normalized and disaggregated income data alongside betting metrics.</p>
<p>Our analysis underscores that betting participation could be shped less by financial distress and more by access, regulation, opportunity cost, or any other factors often underexplored in blanket narratives about gambling behavior.</p>
</section>
<section id="data-ethics" class="level2">
<h2 class="anchored" data-anchor-id="data-ethics">Data Ethics</h2>
<p>We used publicly available datasets from the U.S. Census and state-reported sports betting metrics. This approach minimized privacy risks, as no personally identifiable information (PII) was collected or processed at any stage of the analysis. Nevertheless, working with demographic and behavioral indicators, such as income, education, and gambling activity, still required caution. Even when data is de-identified, aggregation can lead to the reinforcement of stereotypes or the masking of structural inequities. To mitigate this risk, we chose to analyze only state-level trends, avoiding county- or zip-code-level disaggregation that could disproportionately spotlight or stigmatize smaller or more vulnerable populations; and we encourage future research into this sector to evaluate aggregated data as a precaution as well.</p>
<p>We were careful not to frame our findings in terms of moral judgment or individual responsibility, instead focusing on structural correlations and the potential for policy-level interventions. If future analysis were to consist of individual-level analysis, findings from that study could open the door to manipulative use of people’s data. For example, if a sports-betting company can predict an individual’s behavior associated with gambling, they can direct specialized ads and notifications to maximize handle from that user. This could lead to financial disturbance in that person’s life, especially if they already struggle with gambling habits.</p>
<p>Another ethical concern lies in bias baked into the original data sources. U.S. Census data, while comprehensive, has known limitations in how it categorizes income and education. It may undercount certain populations (especially undocumented individuals, rural residents, and Indigenous communities), which can skew representational accuracy. Sports betting data, on the other hand, only includes legal, reported activity, ignoring illegal or unregulated markets where participation may also be significant, particularly in states that have not legalized betting. This creates an incomplete picture of the true landscape and potentially biases our conclusions toward the behavior of more affluent, digitally connected populations who are more likely to use app-based platforms. Our analysis consisted of only 26 states, barely more than half of US states. While we prefaced this in our writing, if it were not properly disclosed it could lead to over-generalized assumptions about U.S. sports betting trends.</p>
<p>Lastly, we would like to recognize how our results could be interpreted, or misinterpreted, in public discourse. Gambling is a socially and politically charged topic, often laden with stigma. Suggesting that certain populations are more likely to gamble can quickly spiral into harmful narratives about irresponsibility or moral failing. Our aim was not to pathologize individuals, but to investigate structural patterns that may reflect underlying disparities in access, education, or economic opportunity. To that end, our findings are not meant to be deterministic conclusions, but rather context for further research and general awareness.</p>
</section>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<p>This project set out to investigate whether socioeconomic indicators, specifically education and income, could help explain variations in sports betting participation across U.S. states. Our initial hypothesis, informed by patterns observed in traditional gambling literature, assumed that individuals with lower education and income levels would participate more heavily in sports betting. However, our findings revealed a more nuanced picture. Education emerged as a particularly important factor, though not in the way we expected. Rather than lower educational attainment predicting greater sports betting activity, our analysis identified an increase in sport-betting activities with higher education levels, specifically bachelor’s degree attainment as the strongest predictor of increased per capita betting. This suggests that sports betting, especially in its app-based form, may appeal more to college-educated individuals; perhaps due to factors like digital fluency, marketing exposure, cultural normalization and the increased disposable income most bachelor’s degree holders have, which leads us to the trends we saw in our income section.</p>
<p>While mean income had a modest positive association with betting revenue per household, total household count showed stronger predictive value. This may reflect structural factors such as population density rather than individual financial behavior. Contrary to narratives that link gambling primarily to financial desperation, our analysis suggests that disposable income may be more relevant to understanding who participates in legal sports betting. Taken together, these results complicate traditional assumptions about gambling behavior. They show that sports betting, as a modern and heavily marketed phenomenon, interacts with socioeconomic indicators differently than casinos or lotteries have in the past. In particular, lower educational attainment may correlate with lower income and thus less disposable cash.</p>
<p>Ultimately, although we negated our original hypothesis, we believe our findings contribute a valuable dimension to public policy and risk regulation discourse. By identifying education and income as meaningful predictors, we hope to support more targeted and equitable safeguards, ones that recognize the diversity of participation across the socioeconomic spectrum rather than relying on outdated generalizations. Future work on this topic should expand the scope of variables under consideration, perhaps incorporating additional census metrics such as race, age, employment type, or urbanization. It would also be useful to compare socioeconomic predictors of traditional gambling versus sports betting, to determine whether the evolving landscape of legal gambling requires a rethinking of regulatory assumptions. As this industry grows, understanding who is participating, and why, is essential to preventing harm and ensuring that gambling is done seeking entertainment rather than desperation.</p>
</section>
<section id="references" class="level1">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Volberg2010" class="csl-entry" role="listitem">
Volberg, Rachel A., Kari L. Nysse-Carris, and Dean R. Gerstein. 2010. <span>“2006 California Problem Gambling Prevalence Survey.”</span> <a href="https://www.problemgambling.ca/EN/Documents/CaliforniaProblemGamblingPrevalenceSurvey.pdf">https://www.problemgambling.ca/EN/Documents/CaliforniaProblemGamblingPrevalenceSurvey.pdf</a>.
</div>
<div id="ref-Welte2004" class="csl-entry" role="listitem">
Welte, John W., Grace M. Barnes, William F. Wieczorek, Marie-Cecile Tidwell, and Joseph C. Parker. 2004. <span>“Risk Factors for Pathological Gambling.”</span> <em>Addictive Behaviors</em> 29 (2): 323–35. <a href="https://doi.org/10.1016/j.addbeh.2003.08.007">https://doi.org/10.1016/j.addbeh.2003.08.007</a>.
</div>
<div id="ref-Williams2011" class="csl-entry" role="listitem">
Williams, Robert J., Rachel A. Volberg, and Robert M. G. Stevens. 2011. <span>“The Population Prevalence of Problem Gambling: Methodological Influences, Standardized Rates, Jurisdictional Differences, and Worldwide Trends.”</span> <a href="https://prism.ucalgary.ca/handle/1880/48495">https://prism.ucalgary.ca/handle/1880/48495</a>.
</div>
</div>
</section>
<section id="appendix" class="level1">
<h1>Appendix</h1>
<p>The following appendix provides supporting materials that complement the main analysis.</p>
<section id="data-dictionary" class="level2">
<h2 class="anchored" data-anchor-id="data-dictionary">Data Dictionaries</h2>
<div class="callout callout-style-default callout-note callout-titled" title="location">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
location
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Stores geographic information.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>geoid</code></td>
<td>Geographic ID</td>
<td>Unique geographic identifier (e.g., a FIPS code). Used in <a href="#income_distribution"><code>income_distribution</code></a>, <a href="#income_summary"><code>income_summary</code></a>, <a href="#edu_long"><code>edu_long</code></a>, and <a href="#clean_sports"><code>clean_sports</code></a>.</td>
</tr>
<tr class="even">
<td><code>place_name</code></td>
<td>Place Name</td>
<td>Name of the geographic area (e.g., “Los Angeles County, CA”).</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="household_type">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
household_type
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Categorizes different types of households.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>household_type_id</code></td>
<td>Household Type ID</td>
<td>Unique identifier for each household type. Used in <a href="#income_distribution"><code>income_distribution</code></a> and <a href="#income_summary"><code>income_summary</code></a>.</td>
</tr>
<tr class="even">
<td><code>type_name</code></td>
<td>Type Name</td>
<td>Name of the household type (e.g., “Family household”).</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="income_brackets">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
income_brackets
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Defines the different categories or ranges for income.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>bracket_id</code></td>
<td>Bracket ID</td>
<td>Unique identifier for each income bracket. Used in <a href="#income_distribution"><code>income_distribution</code></a>.</td>
</tr>
<tr class="even">
<td><code>bracket_name</code></td>
<td>Bracket Name</td>
<td>Descriptive name for the income bracket (e.g., “$50,000 - $75,000”).</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="income_distribution">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
income_distribution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Stores the distribution of household income across different income brackets for specific locations and years.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>year</code></td>
<td>Year</td>
<td>Year the data was collected.</td>
</tr>
<tr class="even">
<td><code>geoid</code></td>
<td>Geographic ID</td>
<td>Links to <a href="#location"><code>location</code></a>.</td>
</tr>
<tr class="odd">
<td><code>bracket_id</code></td>
<td>Bracket ID</td>
<td>Links to <a href="#income_brackets"><code>income_brackets</code></a> to specify the income range.</td>
</tr>
<tr class="even">
<td><code>household_type_id</code></td>
<td>Household Type ID</td>
<td>Links to <a href="#household_type"><code>household_type</code></a>.</td>
</tr>
<tr class="odd">
<td><code>percentage</code></td>
<td>Percentage</td>
<td>Percentage of households in a specific income bracket for a given year, location, and household type.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="income_summary">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
income_summary
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Provides aggregated summary statistics about income for specific locations and years.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>year</code></td>
<td>Year</td>
<td>Year the data was collected.</td>
</tr>
<tr class="even">
<td><code>geoid</code></td>
<td>Geographic ID</td>
<td>Links to <a href="#location"><code>location</code></a>.</td>
</tr>
<tr class="odd">
<td><code>household_type_id</code></td>
<td>Household Type ID</td>
<td>Links to <a href="#household_type"><code>household_type</code></a>.</td>
</tr>
<tr class="even">
<td><code>total_households</code></td>
<td>Total Households</td>
<td>Total number of households for that year, location, and household type.</td>
</tr>
<tr class="odd">
<td><code>med_income_dollars</code></td>
<td>Median Income</td>
<td>Median household income in dollars.</td>
</tr>
</tbody>
</table>
<div class="line-block"><code>mean_income_dollars</code>| Mean Income | Mean household income in dollars. |</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="age_group_map">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
age_group_map
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Defines the different age groups used in other tables.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>age_group_id</code></td>
<td>Age Group ID</td>
<td>Unique identifier for each age group. Used in <a href="#edu_long"><code>edu_long</code></a>.</td>
</tr>
<tr class="even">
<td><code>age_group</code></td>
<td>Age Group</td>
<td>Descriptive name for the age range (e.g., “18–24”).</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="edu_long">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
edu_long
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Stores education-related data over time and across different locations.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>year</code></td>
<td>Year</td>
<td>Year the data was collected.</td>
</tr>
<tr class="even">
<td><code>geoid</code></td>
<td>Geographic ID</td>
<td>Links to <a href="#location"><code>location</code></a>.</td>
</tr>
<tr class="odd">
<td><code>age_group_id</code></td>
<td>Age Group ID</td>
<td>Links to <a href="#age_group_map"><code>age_group_map</code></a> to define the age range.</td>
</tr>
<tr class="even">
<td><code>level_name</code></td>
<td>Education Level</td>
<td>Education level (e.g., “High school graduate”).</td>
</tr>
<tr class="odd">
<td><code>count</code></td>
<td>Count</td>
<td>Number of people attaining the specific education level.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="clean_sports">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
clean_sports
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Contains financial or event data related to sports, linked to specific locations and years.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Variable</strong></th>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>year</code></td>
<td>Year</td>
<td>Year the data was collected.</td>
</tr>
<tr class="even">
<td><code>geoid</code></td>
<td>Geographic ID</td>
<td>Links to <a href="#location"><code>location</code></a>.</td>
</tr>
<tr class="odd">
<td><code>handle</code></td>
<td>Handle</td>
<td>Represents bets placed, number of participants, or similar.</td>
</tr>
<tr class="even">
<td><code>revenue</code></td>
<td>Revenue</td>
<td>Revenue generated.</td>
</tr>
<tr class="odd">
<td><code>hold</code></td>
<td>Hold</td>
<td>Likely profit or percentage of handle retained.</td>
</tr>
<tr class="even">
<td><code>taxes</code></td>
<td>Taxes</td>
<td>Taxes collected.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>